/**
 * angular-ui-utils - Swiss-Army-Knife of AngularJS tools (with no external dependencies!)
 * @version v0.0.1 - 2013-05-07
 * @link http://angular-ui.github.com
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("ui.event",[]).directive("uiEvent",["$parse",function(e){return function(n,i,t){var u=n.$eval(t.uiEvent);angular.forEach(u,function(t,u){var r=e(t);i.bind(u,function(e){var i=Array.prototype.slice.call(arguments);i=i.splice(1),n.$apply(function(){r(n,{$event:e,$params:i})})})})}}]),angular.module("ui.format",[]).filter("format",function(){return function(e,n){if(!e)return e;var i,t=""+e;return void 0===n?t:angular.isArray(n)||angular.isObject(n)?(i=angular.isArray(n)&&"$"||":",angular.forEach(n,function(e,n){t=t.split(i+n).join(e)}),t):t.split("$0").join(n)}}),angular.module("ui.highlight",[]).filter("highlight",function(){return function(e,n,i){return n||angular.isNumber(n)?(e=""+e,n=""+n,i?e.split(n).join('<span class="ui-match">'+n+"</span>"):e.replace(RegExp(n,"gi"),'<span class="ui-match">$&</span>')):e}}),angular.module("ui.if",[]).directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(e,n,i){return function(e,n,t){var u,r;e.$watch(t.uiIf,function(t){u&&(u.remove(),u=void 0),r&&(r.$destroy(),r=void 0),t&&(r=e.$new(),i(r,function(e){u=e,n.after(e)}))})}}}}]),angular.module("ui.inflector",[]).filter("inflector",function(){function e(e){return e.replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})}function n(e,n){return e.replace(/[A-Z]/g,function(e){return n+e})}var i={humanize:function(i){return e(n(i," ").split("_").join(" "))},underscore:function(e){return e.substr(0,1).toLowerCase()+n(e.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(n){return n=n.substr(0,1).toLowerCase()+e(n.split("_").join(" ")).substr(1).split(" ").join("")}};return function(e,n){return n!==!1&&angular.isString(e)?(n=n||"humanize",i[n](e)):e}}),angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function(e,n){return{restrict:"A",compile:function(i,t){if(!angular.isFunction(i[t.uiJq]))throw Error('ui-jq: The "'+t.uiJq+'" function does not exist');var u=e&&e[t.uiJq];return function(e,i,t){function r(){n(function(){i[t.uiJq].apply(i,a)},0,!1)}var a=[];t.uiOptions?(a=e.$eval("["+t.uiOptions+"]"),angular.isObject(u)&&angular.isObject(a[0])&&(a[0]=angular.extend({},u,a[0]))):u&&(a=[u]),t.ngModel&&i.is("select,input,textarea")&&i.bind("change",function(){i.trigger("input")}),t.uiRefresh&&e.$watch(t.uiRefresh,function(){r()}),r()}}}}]),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function(e){var n={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},i=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return function(t,u,r,a){var o,l=[];o=u.$eval(a["ui"+i(t)]),angular.forEach(o,function(n,i){var t,u;u=e(n),angular.forEach(i.split(" "),function(e){t={expression:u,keys:{}},angular.forEach(e.split("-"),function(e){t.keys[e]=!0}),l.push(t)})}),r.bind(t,function(e){var i=!(!e.metaKey||e.ctrlKey),r=!!e.altKey,a=!!e.ctrlKey,o=!!e.shiftKey,s=e.keyCode;"keypress"===t&&!o&&s>=97&&122>=s&&(s-=32),angular.forEach(l,function(t){var l=t.keys[n[e.keyCode]]||t.keys[""+e.keyCode],s=!!t.keys.meta,c=!!t.keys.alt,f=!!t.keys.ctrl,d=!!t.keys.shift;l&&s===i&&c===r&&f===a&&d===o&&u.$apply(function(){t.expression(u,{$event:e})})})})}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(e){return{link:function(n,i,t){e("keydown",n,i,t)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(e){return{link:function(n,i,t){e("keypress",n,i,t)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(e){return{link:function(n,i,t){e("keyup",n,i,t)}}}]),angular.module("ui.mask",[]).directive("uiMask",[function(){var e={9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/};return{priority:100,require:"ngModel",restrict:"A",link:function(n,i,t,u){function r(e){return angular.isDefined(e)?(p(e),_?(s(),c(),void 0):l()):l()}function a(e){return _?(R=h(e||""),q=d(R),u.$setValidity("mask",q),q&&R.length?g(R):void 0):e}function o(e){return _?(R=h(e||""),q=d(R),viewValue=R.length?g(R):"",u.$viewValue=viewValue,u.$setValidity("mask",q),""===R&&void 0!==u.$error.required&&u.$setValidity("required",!1),q?R:void 0):e}function l(){return _=!1,f(),angular.isDefined(z)?i.attr("placeholder",z):i.removeAttr("placeholder"),angular.isDefined(J)?i.attr("maxlength",J):i.removeAttr("maxlength"),i.val(u.$modelValue),u.$viewValue=u.$modelValue,!1}function s(){R=j=h(u.$modelValue||""),A=O=g(R),q=d(R),viewValue=q&&R.length?A:"",t.maxlength&&i.attr("maxlength",2*V[V.length-1]),i.attr("placeholder",S),i.val(viewValue),u.$viewValue=viewValue}function c(){return K?!0:(i.bind("blur",v),i.bind("mousedown mouseup",m),i.bind("input keyup click",$),K=!0,void 0)}function f(){return K?(i.unbind("blur",v),i.unbind("mousedown",m),i.unbind("mouseup",m),i.unbind("input",$),i.unbind("keyup",$),i.unbind("click",$),K=!1,void 0):!0}function d(e){return e.length?e.length===V.length-1:!0}function h(e){var n="",i=C.slice();return e=""+e,angular.forEach(E,function(n){e=e.replace(n,"")}),angular.forEach(e.split(""),function(e){i.length&&i[0].test(e)&&(n+=e,i.shift())}),n}function g(e){var n="",i=V.slice();return angular.forEach(S.split(""),function(t,u){e.length&&u===i[0]?(n+=e.charAt(0)||"_",e=e.substr(1),i.shift()):n+=t}),n}function p(n){var i=0;V=[],C=[],S="","string"==typeof n&&angular.forEach(n.split(""),function(n){e[n]?(V.push(i),S+="_",C.push(e[n])):S+=n,i++}),V.push(V.slice().pop()+1),E=S.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_"),_=V.length>1?!0:!1}function v(){M=0,H=0,q&&0!==R.length||(A="",i.val(""),n.$apply(function(){u.$setViewValue("")}))}function m(e){"mousedown"===e.type?i.bind("mouseout",y):i.unbind("mouseout",y)}function y(){H=x(this),i.unbind("mouseout",y)}function $(e){e=e||{};var t=e.which,r=e.type;if(16===t||91===t)return!0;var a,o=i.val(),l=O,s=h(o),c=j,f=!1,d=b(this)||0,p=M||0,v=d-p,m=V[0],y=V[s.length]||V.slice().shift(),$=x(this),C=H||0,S=$>0,E=C>0,R=o.length>l.length||C&&o.length>l.length-C,A=o.length<l.length||C&&o.length===l.length-C,q=t>=37&&40>=t&&e.shiftKey,_=37===t,K=8===t||"keyup"!==r&&A&&-1===v,z=46===t||"keyup"!==r&&A&&0===v&&!E,J=(_||K||"click"===r)&&d>m;if(H=$,q||S&&("click"===r||"keyup"===r))return!0;if("input"===r&&A&&!E&&s===c){for(;K&&d>m&&!k(d);)d--;for(;z&&y>d&&-1===V.indexOf(d);)d++;var T=V.indexOf(d);s=s.substring(0,T)+s.substring(T+1),f=!0}for(a=g(s),O=a,j=s,i.val(a),f&&n.$apply(function(){u.$setViewValue(s)}),R&&m>=d&&(d=m+1),J&&d--,d=d>y?y:m>d?m:d;!k(d)&&d>m&&y>d;)d+=J?-1:1;(J&&y>d||R&&!k(p))&&d++,M=d,w(this,d)}function k(e){return V.indexOf(e)>-1}function b(e){if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var n=document.selection.createRange();return n.moveStart("character",-e.value.length),n.text.length}}function w(e,n){if(0===e.offsetWidth||0===e.offsetHeight)return!0;if(e.setSelectionRange)e.focus(),e.setSelectionRange(n,n);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",n),i.select()}}function x(e){return void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:void 0}var V,C,S,E,R,A,q,O,j,M,H,_=!1,K=!1,z=t.placeholder,J=t.maxlength;t.$observe("uiMask",r),u.$formatters.push(a),u.$parsers.push(o),i.bind("mousedown mouseup",m),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if(0===i)return-1;var t=0;if(arguments.length>1&&(t=Number(arguments[1]),t!==t?t=0:0!==t&&1/0!==t&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=i)return-1;for(var u=t>=0?t:Math.max(i-Math.abs(t),0);i>u;u++)if(u in n&&n[u]===e)return u;return-1})}}}]),angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(e){var n=null;return void 0!==e&&(n=e),{require:"ngModel",link:function(e,i,t,u){var r;r=angular.element('<a class="ui-reset" />'),i.wrap('<span class="ui-resetwrap" />').after(r),r.bind("click",function(i){i.preventDefault(),e.$apply(function(){t.uiReset?u.$setViewValue(e.$eval(t.uiReset)):u.$setViewValue(n),u.$render()})})}}}]),angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function(e,n){return{restrict:"AC",scope:!0,compile:function(i,t){var u;if(t.uiRoute)u="uiRoute";else if(t.ngHref)u="ngHref";else{if(!t.href)throw Error("uiRoute missing a route or href property on "+i[0]);u="href"}return function(i,t,r){function a(n){(hash=n.indexOf("#"))>-1&&(n=n.substr(hash+1)),s=function(){l(i,e.path().indexOf(n)>-1)},s()}function o(n){(hash=n.indexOf("#"))>-1&&(n=n.substr(hash+1)),s=function(){var t=RegExp("^"+n+"$",["i"]);l(i,t.test(e.path()))},s()}var l=n(r.ngModel||r.routeModel||"$uiRoute").assign,s=angular.noop;switch(u){case"uiRoute":r.uiRoute?o(r.uiRoute):r.$observe("uiRoute",o);break;case"ngHref":r.ngHref?a(r.ngHref):r.$observe("ngHref",a);break;case"href":a(r.href)}i.$on("$routeChangeSuccess",function(){s()})}}}}]),angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function(e){"use strict";return{link:function(n,i,t){var u=i.offset().top;t.uiScrollfix?"-"===t.uiScrollfix.charAt(0)?t.uiScrollfix=u-t.uiScrollfix.substr(1):"+"===t.uiScrollfix.charAt(0)&&(t.uiScrollfix=u+parseFloat(t.uiScrollfix.substr(1))):t.uiScrollfix=u,angular.element(e).bind("scroll.ui-scrollfix",function(){var n;if(angular.isDefined(e.pageYOffset))n=e.pageYOffset;else{var u=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;n=u.scrollTop}!i.hasClass("ui-scrollfix")&&n>t.uiScrollfix?i.addClass("ui-scrollfix"):i.hasClass("ui-scrollfix")&&t.uiScrollfix>n&&i.removeClass("ui-scrollfix")})}}}]),angular.module("ui.showhide",[]).directive("uiShow",[function(){return function(e,n,i){e.$watch(i.uiShow,function(e){e?n.addClass("ui-show"):n.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(e,n,i){e.$watch(i.uiHide,function(e){e?n.addClass("ui-hide"):n.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(e,n,i){e.$watch(i.uiToggle,function(e){e?n.removeClass("ui-hide").addClass("ui-show"):n.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.unique",[]).filter("unique",function(){return function(e,n){if(n===!1)return e;if((n||angular.isUndefined(n))&&angular.isArray(e)){var i=[],t=function(e){return angular.isObject(e)&&angular.isString(n)?e[n]:e};angular.forEach(e,function(e){for(var n=!1,u=0;i.length>u;u++)if(angular.equals(t(i[u]),t(e))){n=!0;break}n||i.push(e)}),e=i}return e}}),angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(e,n,i,t){var u,r,a={},o=e.$eval(i.uiValidate);o&&(angular.isString(o)&&(o={validator:o}),angular.forEach(o,function(n,i){u=function(u){var r=e.$eval(n,{$value:u});return angular.isFunction(r.then)?(r.then(function(){t.$setValidity(i,!0)},function(){t.$setValidity(i,!1)}),u):r?(t.$setValidity(i,!0),u):(t.$setValidity(i,!1),void 0)},a[i]=u,t.$formatters.push(u),t.$parsers.push(u)}),i.uiValidateWatch&&(r=e.$eval(i.uiValidateWatch),angular.isString(r)?e.$watch(r,function(){angular.forEach(a,function(e){e(t.$modelValue)})}):angular.forEach(r,function(n,i){e.$watch(n,function(){a[i](t.$modelValue)})})))}}}),angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.if","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.showhide","ui.unique","ui.validate"]);